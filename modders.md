# A Quick File for Modders

## Why?
 - As with any project that multiple people are working on, it is likely that each person has their own beliefs for how things should be done. This document is meant to solve those disagreements.
 - This can cause many unindended issues (especially localization issues), which comes from duplicated event ids, decision names and localisations.
 - Additionally, many Vic II mods end up with file systems looking like the following image; hundreds of files, many with just a couple of lines of code. This is rather poor organization and can actually make modding harder!\
	![Poor File Structure](modders/bad_file_structure.png)\
	Not to pick on GFM, but it's the only other mod I have installed and the file structure is rather poorly organized. This is a combination of merging in many mods, many modders working on the mod and the lack of set rules to keep this from happening. This is just my estimation, but if one were to run the application that notifies the user of duplicated localisations, I would guess about 10% of their localisation lines would be duplicates.
 - Finally, these rules ensure that the code is standardized and readable, ensuring that debugging is done as quickly as possible.
	
## The Rules
They can essentially be boiled down to the following:
1. Follow the existing patterns for things.
2. If there is a file on the Google Drive folder that things are autogenerated from, update that file. The Drive folder is linked in the pins of the developement-modder channel in the Discord server.
3. Finally, test what you have added!

\* If using Notepad++, I would use the [provided TTA specific Victoria II language](https://github.com/SirRunner/The-Third-Age/blob/main/modders/Victoria%20II.xml). Install it by downloading the file, and dropping it in the userDefineLangs folder. You can quickly navigate to this by opening Notepad++, the clicking Language --> User Defined Language --> Open User Defined Language Folder. I will do my best to update the file as I update my copy. This can then be applied to any file by click Language --> Victoria II. It is made specifically for the Black Board theme (Settigns --> Style Configurator --> Select theme --> Black Board). It should be at the bottom of the list. Unfortunately, as there is no set unique file ending used by the engine (it just uses already existing ones, such as .txt and .csv), this has to be done to every file, every time it is opened.

\*\* These rules most likely won't change, especially once flavor becomes the major focus. That would be very counterproductive. However, more sections may be added as needed.

### Decisions
1. What file should a decision go in?
   - The short, but not really helpful, answer, it depends on what the decision is for.
   - The longer, more helpful and descriptive answer:\
     - If it's for a specific nation or culture group, look at the \_\_Realms file in the Google Drive, in the "Decision File" column. Generally speaking, there is a file specific to each nation, or, if the nation does not have many decisions, they are in the largest realm in the culture group. e.g. the flavor for Lossarnach is in the `Gondor.txt` file.
     - If the decision is unlocked by something else, such as Dol Amroth's rebellion if Gondor chooses to annex Tolfalas, then it should go in the file where the first decision came from. In the provided example, the decision for Dol Amroth's rebellion should be placed right after the "The Tolfalas Question" decision in `Gondor.txt`.
     - If the decision isn't really associated with any country, but rather, a large chain, great powers, or something along those lines, put it in the provided file. For instance, a these could be something such as `War of the Ring.txt`, `Military Leader Recruitment.txt` or `Great Powers.txt`. Each of these file names give the idea of what decisions they have: `War of the Ring.txt` would hold the decisions directly related to the War of the Ring, `Military Leader Recruitment.txt`, the decisions related to the standard leader recruitment, and `Great Powers.txt`, decisions that any Great Power can do.
	
2. So I know what file to use, but where in the file should it go?
   - At the top of the file, there should be a short breakdown of what's in the file:\
     ![Decision Top](modders/decision_top.png)\
     The first line is just another reminder of what file you are in. The following lines are what is of interest. Each line after that first line is a section within the file. If your decision fits within one of the already defined sections, add it to that section (preferably at the bottom of the section). Otherwise, create a new section, and remember to put it in the list of sections at the top of the file (and move the closing bracket in the block comment).
	
3. What are these decision sections?
  ![Decision Sections](modders/decision_section.png)\
   - All they are are `political_decision` blocks within the file. Because of how the engine parses decision files, it is completely fine looking at multiple `political_decision` blocks within the same file, allowing for greater organization to be done in the decision files. Above each block is a comment with a name either matching or closely matching a name in the top of the decision file. Additionally, they are in *the same order* as stated at the top of the file. 
  
4. What syntax should be used when making decisions?
   - Have the opening bracket on the same line as the "=".
   - After an opening bracket, tab over one more time than the previous line.
   - Have the closing bracket start on the same tab level as the line with the corresponding opening bracket.
   - The exception is in cases like the second line of the `potential`. There is only one thing in both the `16` and `NOT` scopes. As such, it is fine to have all of that in one line. Notice how in the effect, despite the `16` scope truly only have one thing in it, since there are two thing within the `add_province_modifier` scope, nothing is collpased down into one line.

5. Anything else that should be done before committing the decision?
   - Test it! Ensure that it's working as intended.
   - See the *Localisation* section.

### Events

### Modifiers

### Localisation

### History Files

### Map and Adjacencies

### Others